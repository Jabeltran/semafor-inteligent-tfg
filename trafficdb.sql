-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Servidor: 127.0.0.1
-- Tiempo de generación: 13-06-2025 a las 01:16:17
-- Versión del servidor: 10.4.32-MariaDB
-- Versión de PHP: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de datos: `trafficdb`
--

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `passos_en_vermell`
--

CREATE TABLE `passos_en_vermell` (
  `timestamp` datetime NOT NULL,
  `semafor_id` int(11) DEFAULT NULL,
  `num_sensors_activats` int(11) DEFAULT NULL,
  `temps_entre_sensors` float DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Volcado de datos para la tabla `passos_en_vermell`
--

INSERT INTO `passos_en_vermell` (`timestamp`, `semafor_id`, `num_sensors_activats`, `temps_entre_sensors`) VALUES
('2025-05-06 07:30:05', 1, 2, 1.2),
('2025-05-06 08:52:18', 1, 2, 1.1),
('2025-05-06 09:00:30', 1, 1, NULL),
('2025-05-06 12:10:20', 1, 2, 0.8),
('2025-05-06 14:20:55', 1, 2, 3.1),
('2025-05-06 15:33:42', 1, 2, 0.78),
('2025-05-06 18:45:15', 1, 2, 1.5),
('2025-05-06 19:11:01', 1, 2, 1.35),
('2025-05-06 21:05:40', 1, 2, 0.95),
('2025-05-06 23:27:29', 1, 2, 1.02);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `sensors_ambientals`
--

CREATE TABLE `sensors_ambientals` (
  `timestamp` datetime NOT NULL,
  `temperatura` float DEFAULT NULL,
  `humitat` float DEFAULT NULL,
  `pressio` float DEFAULT NULL,
  `pluja` tinyint(1) DEFAULT NULL,
  `semafor_id` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Volcado de datos para la tabla `sensors_ambientals`
--

INSERT INTO `sensors_ambientals` (`timestamp`, `temperatura`, `humitat`, `pressio`, `pluja`, `semafor_id`) VALUES
('2025-05-06 00:00:00', 15.5, 88.2, 1012.5, 0, 1),
('2025-05-06 02:00:00', 14.8, 90.1, 1013.1, 1, 1),
('2025-05-06 04:00:00', 14.2, 91.5, 1013.5, 1, 1),
('2025-05-06 06:00:00', 13.9, 92.3, 1013.2, 0, 1),
('2025-05-06 08:00:00', 16.7, 85.8, 1012.8, 0, 1),
('2025-05-06 10:00:00', 19.3, 78.1, 1012.1, 0, 1),
('2025-05-06 12:00:00', 21.5, 70.5, 1011.5, 0, 1),
('2025-05-06 14:00:00', 22.8, 65.2, 1010.9, 0, 1),
('2025-05-06 16:00:00', 21.9, 68.9, 1011.2, 0, 1),
('2025-05-06 18:00:00', 20.1, 73.4, 1011.8, 1, 1),
('2025-05-06 20:00:00', 18.5, 80.7, 1012.3, 1, 1),
('2025-05-06 22:00:00', 17.2, 85.1, 1012.9, 0, 1),
('2025-05-21 22:49:14', 20.7, 50.2, 1010.2, 0, 1),
('2025-05-21 22:49:24', 21.5, 51.7, 1010, 1, 1),
('2025-05-21 22:49:39', 19.1, 51.1, 1010.2, 1, 1),
('2025-05-21 22:49:49', 19.3, 50.6, 1010.3, 1, 1),
('2025-05-21 22:50:07', 19.9, 51, 1010.3, 0, 1),
('2025-05-21 22:50:18', 20.3, 49.6, 1010, 0, 1),
('2025-05-21 22:50:27', 20.4, 50.8, 1010.2, 0, 1),
('2025-05-21 22:50:37', 21.1, 48.9, 1010.7, 0, 1),
('2025-05-21 22:50:48', 20.8, 50.5, 1011.2, 1, 1),
('2025-05-21 22:50:57', 20.1, 50.8, 1011, 1, 1),
('2025-05-21 22:51:07', 19.5, 50, 1011.4, 1, 1),
('2025-05-21 22:51:18', 19, 51, 1011.5, 1, 1),
('2025-05-21 22:51:28', 18.3, 49.4, 1012, 1, 1),
('2025-05-21 22:51:37', 19.3, 47.7, 1012.3, 0, 1),
('2025-05-21 22:51:47', 19.6, 45.7, 1012.5, 0, 1),
('2025-05-21 22:51:57', 18.9, 45.6, 1012.8, 0, 1),
('2025-05-21 22:52:07', 18.5, 45.4, 1013, 0, 1),
('2025-05-21 22:52:18', 19.3, 45, 1013.4, 0, 1),
('2025-05-21 22:52:28', 20.2, 43.7, 1013.6, 0, 1),
('2025-05-21 22:52:37', 19.4, 44.5, 1013.1, 0, 1),
('2025-05-21 22:52:48', 19.3, 45.7, 1012.8, 0, 1),
('2025-05-21 22:52:58', 20.3, 44.1, 1012.9, 0, 1),
('2025-05-21 22:53:07', 21.3, 46, 1012.7, 0, 1),
('2025-05-21 22:53:18', 20.6, 47.6, 1013.2, 1, 1),
('2025-06-02 22:05:53', 19.5, 53.4, 1012.1, 0, 1),
('2025-06-02 22:06:00', 19.1, 53, 1012.5, 0, 1),
('2025-06-02 22:06:10', 18.8, 53.9, 1012.6, 0, 1),
('2025-06-02 22:06:20', 18.6, 53.9, 1013, 0, 1),
('2025-06-02 22:06:30', 19, 52.1, 1012.6, 0, 1),
('2025-06-02 22:06:40', 18.1, 53.1, 1012.2, 1, 1),
('2025-06-02 22:06:50', 19.1, 52.4, 1012.3, 1, 1),
('2025-06-02 22:07:00', 18.2, 51.8, 1012, 1, 1),
('2025-06-02 22:07:10', 18, 50, 1012.5, 1, 1),
('2025-06-02 22:07:20', 18.9, 51.1, 1012.4, 1, 1),
('2025-06-02 22:07:30', 18.6, 50.9, 1012.1, 1, 1),
('2025-06-02 22:07:40', 18.6, 52, 1011.9, 1, 1),
('2025-06-02 22:07:50', 19.1, 51.5, 1011.7, 1, 1),
('2025-06-02 22:08:00', 18.3, 51.6, 1011.2, 0, 1),
('2025-06-02 22:08:10', 18.5, 50.1, 1011.1, 0, 1),
('2025-06-02 22:14:45', 19.3, 51.5, 1010, 0, 1),
('2025-06-02 22:14:55', 19.1, 52.2, 1009.7, 1, 1),
('2025-06-02 22:15:05', 19, 53.1, 1009.6, 1, 1),
('2025-06-02 22:15:15', 18.6, 52, 1009.4, 1, 1),
('2025-06-02 22:15:25', 18.1, 50.6, 1009.3, 1, 1),
('2025-06-02 22:15:35', 18.1, 48.9, 1009.6, 1, 1),
('2025-06-02 22:15:45', 19.1, 47.8, 1009.5, 1, 1),
('2025-06-02 22:15:55', 18.5, 45.8, 1009.6, 1, 1),
('2025-06-02 22:16:05', 17.5, 46.5, 1010.1, 1, 1),
('2025-06-02 22:16:15', 17.3, 46.7, 1010.5, 0, 1),
('2025-06-02 22:16:25', 16.8, 48.4, 1010.7, 0, 1),
('2025-06-02 22:16:35', 17.8, 49.3, 1010.5, 0, 1),
('2025-06-02 22:16:45', 18.3, 47.4, 1010, 0, 1),
('2025-06-02 22:16:55', 19.3, 46.5, 1010.4, 0, 1),
('2025-06-02 22:17:05', 18.4, 44.9, 1010.3, 0, 1),
('2025-06-02 22:17:23', 21, 50.8, 1009.8, 0, 1),
('2025-06-02 22:17:33', 21.7, 52.5, 1010.2, 0, 1),
('2025-06-02 22:17:43', 21.4, 52.1, 1009.9, 0, 1),
('2025-06-02 22:17:53', 22, 52.2, 1009.8, 0, 1),
('2025-06-02 22:18:08', 20.9, 51.3, 1010.4, 0, 1),
('2025-06-02 22:18:18', 20.1, 53, 1010.6, 0, 1),
('2025-06-02 22:18:28', 19.2, 51.1, 1010.6, 0, 1),
('2025-06-02 22:18:38', 19.7, 52.2, 1010.2, 0, 1),
('2025-06-02 22:19:01', 19.2, 50.7, 1009.7, 0, 1),
('2025-06-02 22:19:11', 19.1, 50, 1009.3, 1, 1),
('2025-06-02 22:19:21', 18.6, 51.3, 1009.3, 1, 1),
('2025-06-02 22:19:31', 17.7, 50.6, 1009.7, 1, 1),
('2025-06-02 22:19:41', 18.4, 50.6, 1009.6, 1, 1),
('2025-06-02 22:19:51', 18.4, 50.9, 1009.9, 1, 1),
('2025-06-02 22:55:38', 23.9, 56.5, 1014.7, 1, 1),
('2025-06-02 22:55:50', 24.4, 55.8, 1014.8, 1, 1),
('2025-06-02 22:56:02', 24.2, 55.5, 1015, 1, 1),
('2025-06-02 22:56:13', 24.3, 55.6, 1015.1, 0, 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `users`
--

CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `username` varchar(50) NOT NULL,
  `email` varchar(100) NOT NULL,
  `password` varchar(255) NOT NULL,
  `created_at` datetime DEFAULT current_timestamp(),
  `updated_at` datetime DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `users`
--

INSERT INTO `users` (`id`, `username`, `email`, `password`, `created_at`, `updated_at`) VALUES
(1, 'Beltran', 'jabeltran@mail.com', '$2y$10$mJvqXNwHBCRmPWG6o1BR8uXjo0UXB6/248O9z7D6poF.iVxuqYKQC', '2025-04-27 10:41:23', '2025-04-27 10:41:23'),
(2, 'proba', 'proba@proba.es', '$2y$10$9gkoCk8OE.LMD/aAqr7/X.jfPonewNl03LgzmT9Lo634k7ypBJygq', '2025-04-27 10:43:28', '2025-04-27 10:43:28'),
(3, 'proba2', 'proba@proba2.es', '$2y$10$nwjUBPJegddr0Kg.q62rPeFOoc5rtYCGhVPYGpHXsz7s8m.5yo5x.', '2025-04-27 13:09:12', '2025-04-27 13:09:12');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `velocitat_cotxes`
--

CREATE TABLE `velocitat_cotxes` (
  `timestamp` datetime NOT NULL,
  `velocitat_cms` float DEFAULT NULL,
  `semafor_id` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Volcado de datos para la tabla `velocitat_cotxes`
--

INSERT INTO `velocitat_cotxes` (`timestamp`, `velocitat_cms`, `semafor_id`) VALUES
('2025-05-06 07:15:30', 45.2, 1),
('2025-05-06 07:15:35', 30.8, 1),
('2025-05-06 11:40:10', 62.5, 1),
('2025-05-06 11:40:18', 15.7, 1),
('2025-05-06 16:55:05', 58.9, 1),
('2025-05-06 16:55:12', 38.1, 1),
('2025-05-21 22:49:09', 28.1, 1),
('2025-05-21 22:49:14', 28, 1),
('2025-05-21 22:49:19', 28.4, 1),
('2025-05-21 22:49:24', 29.1, 1),
('2025-05-21 22:49:34', 31.5, 1),
('2025-05-21 22:49:39', 33, 1),
('2025-05-21 22:49:44', 33, 1),
('2025-05-21 22:49:49', 34.6, 1),
('2025-05-21 22:49:54', 36.4, 1),
('2025-05-21 22:50:02', 29.3, 1),
('2025-05-21 22:50:08', 29.8, 1),
('2025-05-21 22:50:12', 29.5, 1),
('2025-05-21 22:50:18', 29, 1),
('2025-05-21 22:50:23', 27.7, 1),
('2025-05-21 22:50:27', 26.5, 1),
('2025-05-21 22:50:33', 25.8, 1),
('2025-05-21 22:50:38', 27.5, 1),
('2025-05-21 22:50:43', 27.3, 1),
('2025-05-21 22:50:48', 28, 1),
('2025-05-21 22:50:53', 27.8, 1),
('2025-05-21 22:50:58', 27.6, 1),
('2025-05-21 22:51:03', 26.9, 1),
('2025-05-21 22:51:08', 25.9, 1),
('2025-05-21 22:51:13', 23.9, 1),
('2025-05-21 22:51:18', 22.1, 1),
('2025-05-21 22:51:23', 23.4, 1),
('2025-05-21 22:51:28', 23.6, 1),
('2025-05-21 22:51:33', 24.2, 1),
('2025-05-21 22:51:38', 24.3, 1),
('2025-05-21 22:51:43', 23.6, 1),
('2025-05-21 22:51:48', 25.5, 1),
('2025-05-21 22:51:53', 26.5, 1),
('2025-05-21 22:51:58', 26, 1),
('2025-05-21 22:52:03', 24.7, 1),
('2025-05-21 22:52:08', 24.9, 1),
('2025-05-21 22:52:13', 26.3, 1),
('2025-05-21 22:52:18', 24.6, 1),
('2025-05-21 22:52:23', 26.4, 1),
('2025-05-21 22:52:28', 26.6, 1),
('2025-05-21 22:52:33', 27.2, 1),
('2025-05-21 22:52:38', 27.4, 1),
('2025-05-21 22:52:43', 25.6, 1),
('2025-05-21 22:52:48', 25.8, 1),
('2025-05-21 22:52:53', 27.8, 1),
('2025-05-21 22:52:58', 29.5, 1),
('2025-05-21 22:53:03', 29.3, 1),
('2025-05-21 22:53:08', 27.7, 1),
('2025-05-21 22:53:13', 26.9, 1),
('2025-05-21 22:53:18', 25.5, 1),
('2025-06-02 22:05:53', 25.7, 1),
('2025-06-02 22:05:55', 27.3, 1),
('2025-06-02 22:06:00', 26.6, 1),
('2025-06-02 22:06:05', 25.1, 1),
('2025-06-02 22:06:10', 24.3, 1),
('2025-06-02 22:06:16', 25.7, 1),
('2025-06-02 22:06:20', 25.5, 1),
('2025-06-02 22:06:25', 25.3, 1),
('2025-06-02 22:06:31', 25.5, 1),
('2025-06-02 22:06:36', 24.5, 1),
('2025-06-02 22:06:40', 25, 1),
('2025-06-02 22:06:45', 24.3, 1),
('2025-06-02 22:06:50', 23.3, 1),
('2025-06-02 22:06:55', 21.3, 1),
('2025-06-02 22:07:00', 21.1, 1),
('2025-06-02 22:07:05', 21.9, 1),
('2025-06-02 22:07:11', 20.8, 1),
('2025-06-02 22:07:16', 21.7, 1),
('2025-06-02 22:07:21', 22.1, 1),
('2025-06-02 22:07:26', 22, 1),
('2025-06-02 22:07:31', 22, 1),
('2025-06-02 22:07:36', 20.3, 1),
('2025-06-02 22:07:40', 22.2, 1),
('2025-06-02 22:07:46', 23.8, 1),
('2025-06-02 22:07:51', 23.6, 1),
('2025-06-02 22:07:56', 24.2, 1),
('2025-06-02 22:08:01', 23.2, 1),
('2025-06-02 22:08:06', 23.5, 1),
('2025-06-02 22:08:11', 22.4, 1),
('2025-06-02 22:14:40', 31.3, 1),
('2025-06-02 22:14:45', 32.7, 1),
('2025-06-02 22:14:50', 33.6, 1),
('2025-06-02 22:14:55', 32.8, 1),
('2025-06-02 22:15:00', 33.2, 1),
('2025-06-02 22:15:05', 33.7, 1),
('2025-06-02 22:15:10', 32.1, 1),
('2025-06-02 22:15:15', 32.5, 1),
('2025-06-02 22:15:20', 34.4, 1),
('2025-06-02 22:15:25', 36, 1),
('2025-06-02 22:15:31', 37.3, 1),
('2025-06-02 22:15:36', 37.9, 1),
('2025-06-02 22:15:40', 37.3, 1),
('2025-06-02 22:15:45', 36.6, 1),
('2025-06-02 22:15:50', 35.3, 1),
('2025-06-02 22:15:55', 33.3, 1),
('2025-06-02 22:16:00', 33, 1),
('2025-06-02 22:16:06', 31.6, 1),
('2025-06-02 22:16:11', 32.1, 1),
('2025-06-02 22:16:15', 33.5, 1),
('2025-06-02 22:16:21', 35.5, 1),
('2025-06-02 22:16:25', 35.4, 1),
('2025-06-02 22:16:30', 35.8, 1),
('2025-06-02 22:16:36', 36.6, 1),
('2025-06-02 22:16:41', 38.1, 1),
('2025-06-02 22:16:46', 38.4, 1),
('2025-06-02 22:16:50', 38.6, 1),
('2025-06-02 22:16:56', 38.4, 1),
('2025-06-02 22:17:01', 37.2, 1),
('2025-06-02 22:17:06', 35.2, 1),
('2025-06-02 22:17:11', 36.6, 1),
('2025-06-02 22:17:18', 28.6, 1),
('2025-06-02 22:17:24', 30.1, 1),
('2025-06-02 22:17:28', 29.7, 1),
('2025-06-02 22:17:33', 30.1, 1),
('2025-06-02 22:17:39', 28.5, 1),
('2025-06-02 22:17:44', 30.3, 1),
('2025-06-02 22:17:48', 31.3, 1),
('2025-06-02 22:17:53', 30, 1),
('2025-06-02 22:18:03', 28.1, 1),
('2025-06-02 22:18:08', 30.1, 1),
('2025-06-02 22:18:13', 28.2, 1),
('2025-06-02 22:18:18', 29.2, 1),
('2025-06-02 22:18:23', 31, 1),
('2025-06-02 22:18:28', 29.8, 1),
('2025-06-02 22:18:33', 31.1, 1),
('2025-06-02 22:18:39', 32.2, 1),
('2025-06-02 22:18:44', 33, 1),
('2025-06-02 22:18:56', 28, 1),
('2025-06-02 22:19:01', 28.1, 1),
('2025-06-02 22:19:06', 26.1, 1),
('2025-06-02 22:19:12', 27.8, 1),
('2025-06-02 22:19:16', 26.6, 1),
('2025-06-02 22:19:21', 26.1, 1),
('2025-06-02 22:19:26', 24.8, 1),
('2025-06-02 22:19:31', 23.5, 1),
('2025-06-02 22:19:36', 21.6, 1),
('2025-06-02 22:19:41', 20.4, 1),
('2025-06-02 22:19:46', 19.9, 1),
('2025-06-02 22:19:52', 18.7, 1),
('2025-06-02 22:19:56', 19.9, 1),
('2025-06-02 22:55:38', 60.4, 1),
('2025-06-02 22:55:45', 62.4, 1),
('2025-06-02 22:55:53', 53.8, 1),
('2025-06-02 22:55:59', 56.4, 1),
('2025-06-02 22:56:06', 59.2, 1),
('2025-06-02 22:56:14', 69.1, 1),
('2025-06-02 22:56:24', 74.7, 1);

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `passos_en_vermell`
--
ALTER TABLE `passos_en_vermell`
  ADD PRIMARY KEY (`timestamp`);

--
-- Indices de la tabla `sensors_ambientals`
--
ALTER TABLE `sensors_ambientals`
  ADD PRIMARY KEY (`timestamp`);

--
-- Indices de la tabla `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `email` (`email`),
  ADD KEY `idx_email` (`email`);

--
-- Indices de la tabla `velocitat_cotxes`
--
ALTER TABLE `velocitat_cotxes`
  ADD PRIMARY KEY (`timestamp`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `users`
--
ALTER TABLE `users`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
